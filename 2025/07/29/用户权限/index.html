<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>用户权限 | Hexo</title><meta name="keywords" content="linux"><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="用户权限"><meta name="application-name" content="用户权限"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="用户权限"><meta property="og:url" content="http://example.com/2025/07/29/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/index.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="一、基本权限UGO1. UGO 的含义123U (User)：文件或目录的所有者（创建者或通过 chown 指定的用户） -属主G (Group)：文件或目录的所属组（通过 chgrp 或 chown 指定的用户组） -属组O (Other)：既不是所有者，也不在所属组中的其他所有用户  2. 权限"><meta property="og:locale" content="en"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="John Doe"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="一、基本权限UGO1. UGO 的含义123U (User)：文件或目录的所有者（创建者或通过 chown 指定的用户） -属主G (Group)：文件或目录的所属组（通过 chgrp 或 chown 指定的用户组） -属组O (Other)：既不是所有者，也不在所属组中的其他所有用户  2. 权限"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/07/29/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: John Doe","link":"Link: ","source":"Source: Hexo","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Hexo',
  title: '用户权限',
  postAI: '',
  pageFillDescription: '一、基本权限UGO, 1. UGO 的含义, 2. 权限类型, 3. 查看权限, 4. 权限的两种表示方式, 符号表示法（rwx）, 数字表示法, 5. **修改权限（**chmod 命令）, 符号模式, 数字模式, 实验1：查看当前目录, 实验2：可执行文件, 实验3：为所有用户添加执行权限, 实验4：目录场景, 实验5：-R选项, 6.更改属主x2F组改变权限（**chown **命令）, 实验1：改属主、属组, 实验2：只改属主, 实验3：只改属组, 7. 关键注意事项, 8. 修改所属组（chgrp）, 9.综合练习, 二、基本权限ACL, 一、ACL与UGO的区别, 1. UGO 权限的局限性, 2.ACL 的优势, 二、ACL核心命令语, 1. 设置权限： setfacl, 三、ACL权限设置与验证, 1. 创建测试文件, 2.设置ACL 权限, 3.查看 ACL 权限： getfacl, 四、权限删除与恢复, 1. 删除单条 ACL, 2. 清空所有 ACL, 3.恢复默认权限, 五、高级特性与注意事项, 1. 递归设置目录权限, 2. 注意事项, 总结, 三、特殊权限, 一、特殊权限位, 1. SUID（safe uid）, 实验1：通过SUID临时提权, 思考：, 二、文件属性chattr, 实验2：通过chattr锁定文件, 扩展属性：, 三、进程掩码umask, 实验3：修改umask控制默认权限, 四、安全注意事项一基本权限的含义文件或目录的所有者创建者或通过指定的用户属主文件或目录的所属组通过或指定的用户组属组既不是所有者也不在所属组中的其他所有用户权限类型每个角色可分配以下三种权限读取文件内容或列出目录中的文件修改文件内容或在目录中创建删除文件执行文件如脚本或进入目录查看权限查看文件或目录的权限第位表示文件表示目录第位的权限可读可写不可执行第位的权限仅可读第位的权限仅可读权限的两种表示方式符号表示法直接使用表示权限示例读写执行读执行无权限数字表示法将转换为数字相加示例修改权限命令使用符号用户组其他读写执行对象赋值符权限类型文件目录符号模式给添加执行权限移除写权限设置只读数字模式设置权限为可读可写可读无权限实验查看当前目录查看目录下的文件子目录的权限无法看到目录的权限命令查看当前目录原因目录的特殊权限体现在最后一个字符作用即使目录有全局写权限只有文件所有者目录所有者或才能删除重命名其中的文件必要性是系统临时目录所有用户都可写入但需防止用户随意删除他人文件检查的完整权限输出注意中的第一个表示粘滞位测试粘滞位效果切换到普通用户尝试删除他人文件会被拒绝实验可执行文件在目录中创建编辑文件写入以下内容编辑观察文件类型并执行文件内容观察程序运行为用户添加的执行权限并再次运行程序如果是其他用户同样没有执行权限可以通过将其他用户加入组并进行提权实现对文件的执行实验为所有用户添加执行权限所有角色添加执行权限不推荐实验目录场景允许其他人查看目录内容但禁止修改可读写进入目录可读进入目录但不能创建删除文件实验选项在中创建递归目录观察新建文件夹的默认权限是多少在目录中创建个文件观察文件默认权限是多少修改权限为观察文件是否变化通过递归修改中所有文件权限为更改属主组改变权限命令语法设置一个文件属于谁属主用户名组名文件实验改属主属组更改权限为切换其他用户尝试访问返回用户更改文件属主组切换用户再次尝试访问实验只改属主实验只改属组关键注意事项目录的执行权限无权限时即使有权限也无法进入目录或读取其中文件列表权限优先级系统按的顺序匹配权限首次匹配成功则生效安全风险避免给文件设置所有用户可读可写可执行尤其是敏感文件如修改所属组修改所属组综合练习需求文件属主是读写执行可以看内容可以改内容可以执行属组是读取只能看不能改不能执行其他人没有权限既不能看又不能改和执行测试使用访问文件写入文件执行文件使用成员访问文件不可写和执行使用其他用户访问文件失败写入失败执行失败操作创建文件创建用户创建组并将加入授予文件属主组以及其他人的权限测试是否拥有权限使用访问文件写入文件执行文件测试使用成员访问文件不可写和执行测试使用其他用户访问文件失败写入失败执行失败二基本权限一与的区别权限的局限性仅支持三个对象用户组其他人无法精细化控制无法为同一文件设置多个独立用户的差异化权限示例需求无法实现以上需求需依赖补充权限的优势多对象支持可为同一文件设置多个用户组的独立权限精细化控制支持读写执行的灵活组合二核心命令语设置权限用户组名称权限文件目录参数解析修改权限删除清空所有用户组用户组其他人名称用户名或组名留空表示默认属主组权限可组合如为用户设置读写权限为组设置只读权限禁止用户访问三权限设置与验证创建测试文件设置权限设置用户拥有读写权限设置组只读权限查看权限属主权限用户的权限实际生效权限与用户权限取交集四权限删除与恢复删除单条清空所有恢复默认权限重置为权限需提前备份五高级特性与注意事项递归设置目录权限递归设置目录及子文件注意事项权限优先级若冲突以为准备份恢复总结核心价值解决无法多用户精细化授权的问题适用于团队协作场景最佳实践优先使用满足基础需求复杂场景再通过补充设置权限修改查看权限删除权限或三特殊权限一特殊权限位作用针对文件程序时具备临时获得属主的权限实验通过临时提权实验目的让普通用户通过临时获得权限查看受保护文件前置条件使用账号创建测试文件创建普通用户编辑切换用户尝试访问改变文件属主再次尝试访问依旧不行实验步骤步骤查看默认权限步骤为命令添加权限权限位出现表示生效步骤普通用户尝试访问受保护文件步骤移除权限实验后必做思考为什么设置后普通用户能读取文件使程序运行时继承属主权限而非用户自身权限观察命令的权限为什么不一样因为所有用户都有要修改自己密码的权力观察文件的权限为什么不一样因为密码不允许任何人随意修改二文件属性作用常用于锁定某个文件拒绝修改分类有两个命令和用来管理属性以下是常用属性实验通过锁定文件实验目的使用防止文件被修改删除实验步骤步骤创建测试文件并查看默认属性步骤添加不可删除属性步骤尝试删除文件失败步骤恢复文件属性扩展属性属性允许追加内容但禁止修改适用于日志文件追加内容可用三进程掩码实验修改控制默认权限实验目的理解如何影响新建文件目录的默认权限实验步骤步骤查看当前值步骤创建文件目录观察默认权限步骤临时修改为开放全部权限步骤恢复为默认值计算公式文件默认权限目录默认权限四安全注意事项风险滥用可能导致权限提升漏洞生产环境慎用优先级属性对同样有效需通过移除属性恢复操作持久化临时修改仅对当前会话有效永久修改需编辑或用户配置文件',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-08-08 12:28:43',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Hexo</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/linux/" style="font-size: 1.05rem;">linux<sup>9</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">July 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>linux</span></a></span></div></div><h1 class="post-title" itemprop="name headline">用户权限</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-07-29T08:17:51.000Z" title="Created 2025-07-29 16:17:51">2025-07-29</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-08-08T04:28:43.322Z" title="Updated 2025-08-08 12:28:43">2025-08-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/07/29/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/"><header><a href="/tags/linux/" tabindex="-1" itemprop="url">linux</a><h1 id="CrawlerTitle" itemprop="name headline">用户权限</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">John Doe</span><time itemprop="dateCreated datePublished" datetime="2025-07-29T08:17:51.000Z" title="Created 2025-07-29 16:17:51">2025-07-29</time><time itemprop="dateCreated datePublished" datetime="2025-08-08T04:28:43.322Z" title="Updated 2025-08-08 12:28:43">2025-08-08</time></header><h2 id="一、基本权限UGO"><a href="#一、基本权限UGO" class="headerlink" title="一、基本权限UGO"></a>一、基本权限UGO</h2><h3 id="1-UGO-的含义"><a href="#1-UGO-的含义" class="headerlink" title="1. UGO 的含义"></a><strong>1. UGO</strong> 的含义</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">U (User)：文件或目录的所有者（创建者或通过 chown 指定的用户） -属主</span><br><span class="line">G (Group)：文件或目录的所属组（通过 chgrp 或 chown 指定的用户组） -属组</span><br><span class="line">O (Other)：既不是所有者，也不在所属组中的其他所有用户</span><br></pre></td></tr></table></figure>

<h3 id="2-权限类型"><a href="#2-权限类型" class="headerlink" title="2. 权限类型"></a><strong>2.</strong> <strong>权限类型</strong></h3><p>每个角色（U&#x2F;G&#x2F;O）可分配以下三种权限：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">r (Read)：读取文件内容，或列出目录中的文件。</span><br><span class="line">w (Write)：修改文件内容，或在目录中创建/删除文件。</span><br><span class="line">x (eXecute)：执行文件（如脚本），或进入目录。</span><br></pre></td></tr></table></figure>

<h3 id="3-查看权限"><a href="#3-查看权限" class="headerlink" title="3. 查看权限"></a><strong>3.</strong> <strong>查看权限</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看文件或目录的权限：</span></span><br><span class="line"><span class="built_in">ls</span> -l /root</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802215836968.png" alt="image-20250802215836968"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">第1位： - 表示文件， d 表示目录。</span><br><span class="line">第2-4位：User 的权限（ rw- ：可读可写，不可执行）。</span><br><span class="line">第5-7位：Group 的权限（ r-- ：仅可读）。</span><br><span class="line">第8-10位：Other 的权限（ r-- ：仅可读）。</span><br></pre></td></tr></table></figure>

<h3 id="4-权限的两种表示方式"><a href="#4-权限的两种表示方式" class="headerlink" title="4. 权限的两种表示方式"></a><strong>4.</strong> <strong>权限的两种表示方式</strong></h3><h4 id="符号表示法（rwx）"><a href="#符号表示法（rwx）" class="headerlink" title="符号表示法（rwx）"></a>符号表示法（rwx）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#直接使用rwx表示权限。</span></span><br><span class="line">示例：</span><br><span class="line">rwxr-x---</span><br><span class="line"><span class="comment">#User： rwx （读、写、执行）</span></span><br><span class="line"><span class="comment">#Group： r-x （读、执行）</span></span><br><span class="line"><span class="comment">#Other： --- （无权限）</span></span><br></pre></td></tr></table></figure>

<h4 id="数字表示法"><a href="#数字表示法" class="headerlink" title="数字表示法"></a>数字表示法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将rwx转换为数字相加： </span></span><br><span class="line">r = 4（2²） </span><br><span class="line">w = 2（2¹） </span><br><span class="line">x = 1（2⁰）</span><br><span class="line"><span class="comment">#示例：750</span></span><br><span class="line">rwxr-x---</span><br><span class="line"><span class="comment">#User： 4+2+1=7</span></span><br><span class="line"><span class="comment">#Group： 4+0+1=5</span></span><br><span class="line"><span class="comment">#Other： 0+0+0=0</span></span><br></pre></td></tr></table></figure>

<h3 id="5-修改权限（-chmod-命令）"><a href="#5-修改权限（-chmod-命令）" class="headerlink" title="5. **修改权限（**chmod 命令）"></a><strong>5.</strong> **修改权限（**chmod <strong>命令）</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用符号：u用户 g组 o其他 r读 w写 x执行 </span></span><br><span class="line"><span class="built_in">chmod</span> 对象(u/g/o/a)赋值符(+/-/=)权限类型(r/w/x)  文件/目录</span><br></pre></td></tr></table></figure>

<h4 id="符号模式"><a href="#符号模式" class="headerlink" title="符号模式"></a><strong>符号模式</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#给User添加执行权限，Group移除写权限，Other设置只读 </span></span><br><span class="line"><span class="built_in">chmod</span> u+x,g-w,o=r example.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802233546138.png" alt="image-20250802233546138"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802233527207.png" alt="image-20250802233527207"></p>
<h4 id="数字模式"><a href="#数字模式" class="headerlink" title="数字模式"></a><strong>数字模式</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置权限为rw-r-----（User可读可写，Group可读，Other无权限） </span></span><br><span class="line"><span class="built_in">chmod</span> 640 example.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802233629524.png" alt="image-20250802233629524"></p>
<h4 id="实验1：查看当前目录"><a href="#实验1：查看当前目录" class="headerlink" title="实验1：查看当前目录"></a>实验1：查看当前目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看/tmp目录下的文件/子目录的权限,无法看到/tmp目录的权限</span></span><br><span class="line">ll /tmp</span><br><span class="line"><span class="comment">#-d 命令查看当前目录</span></span><br><span class="line">ll -d /tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#原因：/tmp 目录的特殊权限体现在最后一个字符 t：</span></span><br><span class="line"><span class="comment">#作用：即使目录有全局写权限（rwxrwxrwx），只有文件所有者、目录所有者或root才能删除/重命名其中的文件。</span></span><br><span class="line"><span class="comment">#必要性：/tmp 是系统临时目录，所有用户都可写入，但需防止用户随意删除他人文件。</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802234337339.png" alt="image-20250802234337339"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802234408765.png" alt="image-20250802234408765"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#检查 /tmp 的完整权限：</span></span><br><span class="line"><span class="built_in">stat</span> /tmp</span><br><span class="line"><span class="comment">#输出</span></span><br><span class="line">Access: (1777/drwxrwxrwt)  <span class="comment"># 注意 1777 中的第一个1表示粘滞位</span></span><br><span class="line"><span class="comment">#测试粘滞位效果：</span></span><br><span class="line"><span class="comment"># 切换到普通用户</span></span><br><span class="line">su - admin</span><br><span class="line"><span class="comment"># 尝试删除他人文件</span></span><br><span class="line"><span class="built_in">rm</span> /tmp/ppp  <span class="comment"># 会被拒绝</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802235400863.png" alt="image-20250802235400863"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802235424404.png" alt="image-20250802235424404"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802235438714.png" alt="image-20250802235438714"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250802235723538.png" alt="image-20250802235723538"></p>
<h4 id="实验2：可执行文件"><a href="#实验2：可执行文件" class="headerlink" title="实验2：可执行文件"></a>实验2：可执行文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.在/tmp目录中创建1.txt，编辑文件写入以下内容</span></span><br><span class="line">vim 1.txt</span><br><span class="line"><span class="comment">#编辑</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello zhouwu&quot;</span> </span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;please your name?&quot;</span> </span><br><span class="line">name <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span> good&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.观察文件类型并执行文件内容，观察程序运行</span></span><br><span class="line">[root@<span class="built_in">test</span> tmp]# ll 1.txt</span><br><span class="line">[root@<span class="built_in">test</span> tmp]# ./1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803003258223.png" alt="image-20250803003258223"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.为用户添加1.txt的执行权限并再次运行程序</span></span><br><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">chmod</span> u+x 1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803003518176.png" alt="image-20250803003518176"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#如果是其他用户，同样没有执行权限。</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803004458663.png" alt="image-20250803004458663"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可以通过将其他用户加入wheel组，并进行sudo提权实现对文件的执行</span></span><br><span class="line">[root@<span class="built_in">test</span> ~]# usermod user03 -aG wheel</span><br><span class="line">[user03@<span class="built_in">test</span> tmp]$ <span class="built_in">sudo</span> ./1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803004623750.png" alt="image-20250803004623750"></p>
<h4 id="实验3：为所有用户添加执行权限"><a href="#实验3：为所有用户添加执行权限" class="headerlink" title="实验3：为所有用户添加执行权限"></a>实验3：为所有用户添加执行权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x script.sh <span class="comment"># 所有角色添加执行权限（不推荐）</span></span><br><span class="line"><span class="built_in">chmod</span> a+x script.sh</span><br></pre></td></tr></table></figure>

<h4 id="实验4：目录场景"><a href="#实验4：目录场景" class="headerlink" title="实验4：目录场景"></a>实验4：目录场景</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#允许其他人查看目录内容，但禁止修改：</span></span><br><span class="line"><span class="built_in">chmod</span> 755 mydir/ <span class="comment"># rwxr-xr-x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#User：可读、写、进入目录。</span></span><br><span class="line"><span class="comment">#Group/Other：可读、进入目录，但不能创建/删除文件。</span></span><br></pre></td></tr></table></figure>

<h4 id="实验5：-R选项"><a href="#实验5：-R选项" class="headerlink" title="实验5：-R选项"></a>实验5：-R选项</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.在tmp中创建递归目录dir1，观察新建文件夹的默认权限是多少（755）</span></span><br><span class="line">[root@<span class="built_in">test</span> ~]# <span class="built_in">mkdir</span> -p /tmp/dir1</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803014625383.png" alt="image-20250803014625383"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.在dir1目录中创建3个文件111、222、333，观察文件默认权限是多少（644）</span></span><br><span class="line">[root@<span class="built_in">test</span> dir1]# <span class="built_in">touch</span> 111 222 333</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803014931795.png" alt="image-20250803014931795"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.修改dir1权限为777，观察文件是否变化</span></span><br><span class="line">[root@<span class="built_in">test</span> dir1]# <span class="built_in">chmod</span> 777 .</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803015235259.png" alt="image-20250803015235259"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#4.通过-R递归修改dir1中所有文件权限为700</span></span><br><span class="line">[root@<span class="built_in">test</span> dir1]# <span class="built_in">chmod</span> -R 700 /dir1/</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803020455049.png" alt="image-20250803020455049"></p>
<h3 id="6-更改属主-组改变权限（-chown-命令）"><a href="#6-更改属主-组改变权限（-chown-命令）" class="headerlink" title="6.更改属主&#x2F;组改变权限（**chown **命令）"></a>6.更改属主&#x2F;组改变权限（**chown **命令）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#语法：change owner</span></span><br><span class="line"><span class="built_in">chown</span>： 设置一个文件属于谁，属主 </span><br><span class="line"><span class="built_in">chown</span> 用户名.组名 文件</span><br></pre></td></tr></table></figure>

<h4 id="实验1：改属主、属组"><a href="#实验1：改属主、属组" class="headerlink" title="实验1：改属主、属组"></a>实验1：改属主、属组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.更改file1权限为600</span></span><br><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">chmod</span> 600 file1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803021700348.png" alt="image-20250803021700348"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2. 切换其他用户尝试访问</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803022143358.png" alt="image-20250803022143358"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3. 返回root用户，更改文件属主/组 </span></span><br><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">chown</span> user01.wheel file1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803022414753.png" alt="image-20250803022414753"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#4. 切换user01用户再次尝试访问</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803022738356.png" alt="image-20250803022738356"></p>
<h4 id="实验2：只改属主"><a href="#实验2：只改属主" class="headerlink" title="实验2：只改属主"></a>实验2：只改属主</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">chown</span> admin file1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803023035597.png" alt="image-20250803023035597"></p>
<h4 id="实验3：只改属组"><a href="#实验3：只改属组" class="headerlink" title="实验3：只改属组"></a>实验3：只改属组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">chown</span> .hr file1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803023246487.png" alt="image-20250803023246487"></p>
<h3 id="7-关键注意事项"><a href="#7-关键注意事项" class="headerlink" title="7. 关键注意事项"></a><strong>7.</strong> 关键注意事项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.目录的执行权限（x）：</span></span><br><span class="line">无 x 权限时，即使有 r 权限，也无法 <span class="built_in">cd</span> 进入目录或读取其中文件列表。</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.权限优先级：</span></span><br><span class="line">系统按 User→Group→Other的顺序匹配权限，首次匹配成功则生效。</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.安全风险：</span></span><br><span class="line">避免给文件设置 777 （所有用户可读可写可执行），尤其是敏感文件（如/etc/passwd ）。</span><br></pre></td></tr></table></figure>

<h3 id="8-修改所属组（chgrp）"><a href="#8-修改所属组（chgrp）" class="headerlink" title="8. 修改所属组（chgrp）"></a>8. 修改所属组（chgrp）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改所属组 </span></span><br><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">chgrp</span> wheel file1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803023855007.png" alt="image-20250803023855007"></p>
<h3 id="9-综合练习"><a href="#9-综合练习" class="headerlink" title="9.综合练习"></a>9.综合练习</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#需求：</span></span><br><span class="line">文件file10.txt</span><br><span class="line">属主是user100，读写执行-7（可以看内容，可以改内容，可以执行）</span><br><span class="line">属组是jishuzu（user200），读取 -4（只能看，不能改，不能执行）</span><br><span class="line">其他人 没有权限-0（既不能看，又不能改和执行）</span><br><span class="line"><span class="comment">#测试：</span></span><br><span class="line">1. 使用user100，访问文件。写入文件，执行文件</span><br><span class="line">2. 使用jishuzu成员，访问文件，不可写和执行</span><br><span class="line">3. 使用其他用户user300，访问文件失败。写入失败，执行失败</span><br><span class="line"><span class="comment">#操作：</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.创建文件</span></span><br><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">touch</span> file10.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803024536347.png" alt="image-20250803024536347"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.创建用户user100 user200 user300</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803024741474.png" alt="image-20250803024741474"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#3.创建组 jishuzu,并将user200加入jishuzu</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803024917194.png" alt="image-20250803024917194"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#4.授予文件属主/组，以及其他人的权限</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803025730839.png" alt="image-20250803025730839"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#5.测试user100,是否拥有rwx权限</span></span><br><span class="line"><span class="comment"># 使用user100，访问文件、写入文件、执行文件</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803030822704.png" alt="image-20250803030822704"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#6.测试user200 </span></span><br><span class="line"><span class="comment"># 使用jishuzu成员，访问文件，不可写和执行</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803031101176.png" alt="image-20250803031101176"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803031322897.png" alt="image-20250803031322897"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#7.测试user300</span></span><br><span class="line"><span class="comment">#使用其他用户user300，访问文件失败、写入失败、执行失败。</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803031745049.png" alt="image-20250803031745049"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803031704191.png" alt="image-20250803031704191"></p>
<h2 id="二、基本权限ACL"><a href="#二、基本权限ACL" class="headerlink" title="二、基本权限ACL"></a>二、基本权限ACL</h2><h3 id="一、ACL与UGO的区别"><a href="#一、ACL与UGO的区别" class="headerlink" title="一、ACL与UGO的区别"></a>一、ACL与UGO的区别</h3><h4 id="1-UGO-权限的局限性"><a href="#1-UGO-权限的局限性" class="headerlink" title="1. UGO 权限的局限性"></a>1. UGO 权限的局限性</h4><p><strong>仅支持三个对象</strong>：用户（User）、组（Group）、其他人（Other）。</p>
<p><strong>无法精细化控制</strong>：无法为同一文件设置多个独立用户的差异化权限。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例需求</span></span><br><span class="line">user01 rwx file1 </span><br><span class="line">user02 rw file1 </span><br><span class="line">user03 r file1 </span><br><span class="line">user04 rwx file1 </span><br><span class="line">user05 rw file1</span><br><span class="line"></span><br><span class="line"><span class="comment">#UGO无法实现以上需求，需依赖ACL补充权限。</span></span><br></pre></td></tr></table></figure>

<h4 id="2-ACL-的优势"><a href="#2-ACL-的优势" class="headerlink" title="2.ACL 的优势"></a>2.ACL 的优势</h4><p><strong>多对象支持</strong>：可为同一文件设置多个用户&#x2F;组的独立权限。</p>
<p><strong>精细化控制</strong>：支持 r（读） w（写） x （执行）的灵活组合。</p>
<h3 id="二、ACL核心命令语"><a href="#二、ACL核心命令语" class="headerlink" title="二、ACL核心命令语"></a>二、ACL核心命令语</h3><h4 id="1-设置权限：-setfacl"><a href="#1-设置权限：-setfacl" class="headerlink" title="1. 设置权限： setfacl"></a>1. <strong>设置权限：</strong> setfacl</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m &lt;用户/组&gt;:&lt;名称&gt;:&lt;权限&gt; &lt;文件/目录&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数解析： </span></span><br><span class="line"><span class="comment">#-m：修改权限  -x：删除  -b：清空所有ACL。</span></span><br><span class="line"><span class="comment">#&lt;用户/组&gt;：u（用户）、g（组）、o（其他人）。</span></span><br><span class="line"><span class="comment">#&lt;名称&gt;：用户名或组名（留空表示默认属主/组）。</span></span><br><span class="line"><span class="comment">#&lt;权限&gt;：r/w/x（可组合，如rw）。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为用户alice设置读写权限</span></span><br><span class="line">setfacl -m u:alice:rw /home/test.txt </span><br><span class="line"><span class="comment"># 为组hr设置只读权限 </span></span><br><span class="line">setfacl -m g:hr:r /home/test.txt </span><br><span class="line"><span class="comment"># 禁止用户jack访问 </span></span><br><span class="line">setfacl -m u:jack:- /home/test.txt</span><br></pre></td></tr></table></figure>

<h3 id="三、ACL权限设置与验证"><a href="#三、ACL权限设置与验证" class="headerlink" title="三、ACL权限设置与验证"></a>三、ACL权限设置与验证</h3><h4 id="1-创建测试文件"><a href="#1-创建测试文件" class="headerlink" title="1. 创建测试文件"></a><strong>1.</strong> <strong>创建测试文件</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> ~]# <span class="built_in">touch</span> /home/1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803034609757.png" alt="image-20250803034609757"></p>
<h4 id="2-设置ACL-权限"><a href="#2-设置ACL-权限" class="headerlink" title="2.设置ACL 权限"></a>2.设置ACL 权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置用户user01拥有读写权限，设置hr组只读权限</span></span><br><span class="line">[root@<span class="built_in">test</span> ~]# setfacl -m u:user01:rw /home/1.txt</span><br><span class="line">[root@<span class="built_in">test</span> ~]# setfacl -m g:hr:r /home/1.txt</span><br></pre></td></tr></table></figure>

<h4 id="3-查看-ACL-权限：-getfacl"><a href="#3-查看-ACL-权限：-getfacl" class="headerlink" title="3.查看 ACL 权限： getfacl"></a>3.查看 ACL 权限： getfacl</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> ~]# getfacl /home/1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803035134551.png" alt="image-20250803035134551"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#user::rw- ：属主权限。</span></span><br><span class="line"><span class="comment">#user:user01:rw- ：用户 user01的 ACL 权限。</span></span><br><span class="line"><span class="comment">#mask::rw- ：实际生效权限（与用户权限取交集）</span></span><br></pre></td></tr></table></figure>

<h3 id="四、权限删除与恢复"><a href="#四、权限删除与恢复" class="headerlink" title="四、权限删除与恢复"></a>四、权限删除与恢复</h3><h4 id="1-删除单条-ACL"><a href="#1-删除单条-ACL" class="headerlink" title="1. 删除单条 ACL"></a><strong>1.</strong> <strong>删除单条</strong> <strong>ACL</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> ~]# setfacl -x g:hr /home/1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803035508950.png" alt="image-20250803035508950"></p>
<h4 id="2-清空所有-ACL"><a href="#2-清空所有-ACL" class="headerlink" title="2. 清空所有 ACL"></a><strong>2.</strong> <strong>清空所有</strong> <strong>ACL</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> ~]# setfacl -b /home/1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803035605624.png" alt="image-20250803035605624"></p>
<h4 id="3-恢复默认权限"><a href="#3-恢复默认权限" class="headerlink" title="3.恢复默认权限"></a>3.恢复默认权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重置为 UGO 权限（需提前备份） </span></span><br><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">chmod</span> 644 /home/1.txt </span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803040139895.png" alt="image-20250803040139895"></p>
<h3 id="五、高级特性与注意事项"><a href="#五、高级特性与注意事项" class="headerlink" title="五、高级特性与注意事项"></a>五、高级特性与注意事项</h3><h4 id="1-递归设置目录权限"><a href="#1-递归设置目录权限" class="headerlink" title="1. 递归设置目录权限"></a><strong>1.</strong> 递归设置目录权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 递归设置目录及子文件 </span></span><br><span class="line">setfacl -R -m u:alice:rwx /data/</span><br></pre></td></tr></table></figure>

<h4 id="2-注意事项"><a href="#2-注意事项" class="headerlink" title="2. 注意事项"></a><strong>2.</strong> 注意事项</h4><p>权限优先级：ACL &gt; UGO（若冲突，以 ACL 为准）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份 </span></span><br><span class="line">getfacl -R /path &gt; acl_backup.txt </span><br><span class="line"><span class="comment"># 恢复 </span></span><br><span class="line">setfacl --restore=acl_backup.txt</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><strong>ACL</strong> <strong>核心价值</strong>：解决 UGO 无法多用户精细化授权的问题，适用于团队协作场景。</p>
<p><strong>最佳实践</strong>：优先使用 UGO 满足基础需求，复杂场景再通过 ACL 补充。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置权限（修改）： </span></span><br><span class="line">setfacl -m </span><br><span class="line"><span class="comment">#查看权限： </span></span><br><span class="line">getfacl</span><br><span class="line"><span class="comment">#删除权限： </span></span><br><span class="line">setfacl -x 或 -b</span><br></pre></td></tr></table></figure>

<h2 id="三、特殊权限"><a href="#三、特殊权限" class="headerlink" title="三、特殊权限"></a>三、特殊权限</h2><h3 id="一、特殊权限位"><a href="#一、特殊权限位" class="headerlink" title="一、特殊权限位"></a>一、特殊权限位</h3><h4 id="1-SUID（safe-uid）"><a href="#1-SUID（safe-uid）" class="headerlink" title="1. SUID（safe uid）"></a>1. SUID（safe uid）</h4><p>作用：suid针对文件&#x2F;程序时，具备临时获得属主的权限。</p>
<h5 id="实验1：通过SUID临时提权"><a href="#实验1：通过SUID临时提权" class="headerlink" title="实验1：通过SUID临时提权"></a>实验1：通过SUID临时提权</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#实验目的：</span></span><br><span class="line">让普通用户通过SUID临时获得root权限，查看受保护文件</span><br><span class="line"></span><br><span class="line"><span class="comment">#前置条件：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用root账号创建测试文件 /root/2.txt</span></span><br><span class="line"><span class="comment">#创建普通用户 alice</span></span><br><span class="line"><span class="comment">#编辑2.txt</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803041306402.png" alt="image-20250803041306402"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#切换用户 alice ,尝试访问/root/2.txt</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803041507080.png" alt="image-20250803041507080"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#改变文件属主，再次尝试访问，依旧不行</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803041645766.png" alt="image-20250803041645766"></p>
<p><strong>实验步骤：</strong></p>
<p>步骤1：查看默认权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> ~]# ll /usr/bin/cat</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803044153318.png" alt="image-20250803044153318"></p>
<p>步骤2：为cat 命令添加SUID权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> ~]# <span class="built_in">chmod</span> u+s /usr/bin/cat</span><br><span class="line"><span class="comment"># 权限位出现&#x27;s&#x27;表示SUID生效</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803044135455.png" alt="image-20250803044135455"></p>
<p>步骤3：普通用户尝试访问受保护文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[alice@<span class="built_in">test</span> ~]$ <span class="built_in">cat</span> /root/2.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803044356607.png" alt="image-20250803044356607"></p>
<p>步骤4：移除SUID权限（实验后必做！）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> ~]# <span class="built_in">chmod</span> u-s /usr/bin/cat</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803044555073.png" alt="image-20250803044555073"></p>
<h4 id="思考："><a href="#思考：" class="headerlink" title="思考："></a>思考：</h4><p><strong>Q1:为什么设置SUID后普通用户能读取root文件？</strong></p>
<p>SUID使程序运行时继承属主（root）权限，而非用户自身权限。</p>
<p><strong>Q2:观察命令passwd的权限，为什么不一样</strong></p>
<p>因为所有用户都有要修改自己密码的权力</p>
<p><strong>Q3:观察文件 &#x2F;etc&#x2F;shadow的权限，为什么不一样</strong></p>
<p>因为密码不允许任何人随意修改</p>
<h3 id="二、文件属性chattr"><a href="#二、文件属性chattr" class="headerlink" title="二、文件属性chattr"></a>二、文件属性chattr</h3><p><strong>作用：常用于锁定某个文件，拒绝修改。</strong></p>
<p><strong>分类：有两个命令lsattr和chattr用来管理属性。以下是常用属性：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803045210644.png" alt="image-20250803045210644"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\15078\AppData\Roaming\Typora\typora-user-images\image-20250803045259987.png" alt="image-20250803045259987"></p>
<h4 id="实验2：通过chattr锁定文件"><a href="#实验2：通过chattr锁定文件" class="headerlink" title="实验2：通过chattr锁定文件"></a>实验2：通过chattr锁定文件</h4><p><strong>实验目的：使用 chattr 防止文件被修改&#x2F;删除</strong></p>
<p><strong>实验步骤：</strong></p>
<p>步骤1：创建测试文件并查看默认属性</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> tmp]# lsattr f1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803045641547.png" alt="image-20250803045641547"></p>
<p>步骤2：添加不可删除属性 i</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> tmp]# chattr +i f1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803045743759.png" alt="image-20250803045743759"></p>
<p>步骤3：尝试删除文件（失败）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803045850624.png" alt="image-20250803045850624"></p>
<p>步骤4：恢复文件属性</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> tmp]# chattr -i f1.txt</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803050010681.png" alt="image-20250803050010681"></p>
<h5 id="扩展属性："><a href="#扩展属性：" class="headerlink" title="扩展属性："></a>扩展属性：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#a 属性：允许追加内容但禁止修改（适用于日志文件）</span></span><br><span class="line">[root@<span class="built_in">test</span> ~]# chattr +a f1.txt <span class="comment"># 追加内容可用`echo &quot;text&quot; &gt;&gt; f1.txt`</span></span><br></pre></td></tr></table></figure>

<h3 id="三、进程掩码umask"><a href="#三、进程掩码umask" class="headerlink" title="三、进程掩码umask"></a>三、进程掩码umask</h3><h4 id="实验3：修改umask控制默认权限"><a href="#实验3：修改umask控制默认权限" class="headerlink" title="实验3：修改umask控制默认权限"></a>实验3：修改umask控制默认权限</h4><p><strong>实验目的：理解umask如何影响新建文件&#x2F;目录的默认权限</strong></p>
<p><strong>实验步骤：</strong></p>
<p>步骤1：查看当前umask值</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803050618537.png" alt="image-20250803050618537"></p>
<p>步骤2：创建文件&#x2F;目录观察默认权限</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803050728930.png" alt="image-20250803050728930"></p>
<p>步骤3：临时修改umask为000（开放全部权限）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.githubusercontent.com/seventeen526/picgo/main/img/image-20250803050901337.png" alt="image-20250803050901337"></p>
<p>步骤4：恢复umask为默认值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">test</span> tmp]# <span class="built_in">umask</span> 0022</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>计算公式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文件默认权限 = 666 - umask</span><br><span class="line">目录默认权限 = 777 - umask</span><br></pre></td></tr></table></figure>



<h3 id="四、安全注意事项"><a href="#四、安全注意事项" class="headerlink" title="四、安全注意事项"></a>四、安全注意事项</h3><p><strong>1.SUID风险：</strong></p>
<p>滥用SUID可能导致权限提升漏洞，生产环境慎用！</p>
<p><strong>2.chattr优先级：</strong></p>
<p> i &#x2F; a 属性对root同样有效，需通过移除属性恢复操作。</p>
<p><strong>3.umask持久化：</strong></p>
<p>临时修改仅对当前会话有效，永久修改需编辑 &#x2F;etc&#x2F;profile 或用户shell配置文件。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">John Doe</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/07/29/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/07/29/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/')">用户权限</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/07/29/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=用户权限&amp;url=http://example.com/2025/07/29/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>linux<span class="tagsPageCount">9</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/07/29/%E8%BD%AF%E4%BB%B6%E7%AE%A1%E7%90%86/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">软件管理</div></div></a></div><div class="next-post pull-right"><a href="/2025/07/29/%E6%8F%90%E6%9D%83/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">提权</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2025/07/29/Centos8%20Apache%E7%9A%84%E6%90%AD%E5%BB%BA/" title="Centos8 Apache的搭建"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-29</div><div class="title">Centos8 Apache的搭建</div></div></a></div><div><a href="/2025/07/29/linux/" title="linux文件管理与查询"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-29</div><div class="title">linux文件管理与查询</div></div></a></div><div><a href="/2025/07/29/VIM%E7%BC%96%E8%BE%91%E5%99%A8%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/" title="VIM编辑器和用户组管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-29</div><div class="title">VIM编辑器和用户组管理</div></div></a></div><div><a href="/2025/07/29/linux%E5%9F%BA%E7%A1%80%E5%A4%A7%E4%BD%9C%E4%B8%9Aw1/" title="linux基础作业w1"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-29</div><div class="title">linux基础作业w1</div></div></a></div><div><a href="/2025/07/29/%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9/" title="压缩和解压缩"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-29</div><div class="title">压缩和解压缩</div></div></a></div><div><a href="/2025/07/29/%E6%8F%90%E6%9D%83/" title="提权"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-29</div><div class="title">提权</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E6%9D%83%E9%99%90UGO"><span class="toc-number">1.</span> <span class="toc-text">一、基本权限UGO</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-UGO-%E7%9A%84%E5%90%AB%E4%B9%89"><span class="toc-number">1.1.</span> <span class="toc-text">1. UGO 的含义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9D%83%E9%99%90%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text">2. 权限类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B%E6%9D%83%E9%99%90"><span class="toc-number">1.3.</span> <span class="toc-text">3. 查看权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9D%83%E9%99%90%E7%9A%84%E4%B8%A4%E7%A7%8D%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">4. 权限的两种表示方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%88rwx%EF%BC%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">符号表示法（rwx）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="toc-number">1.4.2.</span> <span class="toc-text">数字表示法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90%EF%BC%88-chmod-%E5%91%BD%E4%BB%A4%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">5. **修改权限（**chmod 命令）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.5.1.</span> <span class="toc-text">符号模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.5.2.</span> <span class="toc-text">数字模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C1%EF%BC%9A%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95"><span class="toc-number">1.5.3.</span> <span class="toc-text">实验1：查看当前目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.4.</span> <span class="toc-text">实验2：可执行文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C3%EF%BC%9A%E4%B8%BA%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90"><span class="toc-number">1.5.5.</span> <span class="toc-text">实验3：为所有用户添加执行权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C4%EF%BC%9A%E7%9B%AE%E5%BD%95%E5%9C%BA%E6%99%AF"><span class="toc-number">1.5.6.</span> <span class="toc-text">实验4：目录场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C5%EF%BC%9A-R%E9%80%89%E9%A1%B9"><span class="toc-number">1.5.7.</span> <span class="toc-text">实验5：-R选项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%9B%B4%E6%94%B9%E5%B1%9E%E4%B8%BB-%E7%BB%84%E6%94%B9%E5%8F%98%E6%9D%83%E9%99%90%EF%BC%88-chown-%E5%91%BD%E4%BB%A4%EF%BC%89"><span class="toc-number">1.6.</span> <span class="toc-text">6.更改属主&#x2F;组改变权限（**chown **命令）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C1%EF%BC%9A%E6%94%B9%E5%B1%9E%E4%B8%BB%E3%80%81%E5%B1%9E%E7%BB%84"><span class="toc-number">1.6.1.</span> <span class="toc-text">实验1：改属主、属组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E5%8F%AA%E6%94%B9%E5%B1%9E%E4%B8%BB"><span class="toc-number">1.6.2.</span> <span class="toc-text">实验2：只改属主</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C3%EF%BC%9A%E5%8F%AA%E6%94%B9%E5%B1%9E%E7%BB%84"><span class="toc-number">1.6.3.</span> <span class="toc-text">实验3：只改属组</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%85%B3%E9%94%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.7.</span> <span class="toc-text">7. 关键注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BF%AE%E6%94%B9%E6%89%80%E5%B1%9E%E7%BB%84%EF%BC%88chgrp%EF%BC%89"><span class="toc-number">1.8.</span> <span class="toc-text">8. 修改所属组（chgrp）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E7%BB%BC%E5%90%88%E7%BB%83%E4%B9%A0"><span class="toc-number">1.9.</span> <span class="toc-text">9.综合练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E6%9C%AC%E6%9D%83%E9%99%90ACL"><span class="toc-number">2.</span> <span class="toc-text">二、基本权限ACL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81ACL%E4%B8%8EUGO%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.1.</span> <span class="toc-text">一、ACL与UGO的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-UGO-%E6%9D%83%E9%99%90%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7"><span class="toc-number">2.1.1.</span> <span class="toc-text">1. UGO 权限的局限性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-ACL-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.ACL 的优势</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81ACL%E6%A0%B8%E5%BF%83%E5%91%BD%E4%BB%A4%E8%AF%AD"><span class="toc-number">2.2.</span> <span class="toc-text">二、ACL核心命令语</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90%EF%BC%9A-setfacl"><span class="toc-number">2.2.1.</span> <span class="toc-text">1. 设置权限： setfacl</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81ACL%E6%9D%83%E9%99%90%E8%AE%BE%E7%BD%AE%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-number">2.3.</span> <span class="toc-text">三、ACL权限设置与验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.1.</span> <span class="toc-text">1. 创建测试文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%AE%BE%E7%BD%AEACL-%E6%9D%83%E9%99%90"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.设置ACL 权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B-ACL-%E6%9D%83%E9%99%90%EF%BC%9A-getfacl"><span class="toc-number">2.3.3.</span> <span class="toc-text">3.查看 ACL 权限： getfacl</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%9D%83%E9%99%90%E5%88%A0%E9%99%A4%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-number">2.4.</span> <span class="toc-text">四、权限删除与恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%A0%E9%99%A4%E5%8D%95%E6%9D%A1-ACL"><span class="toc-number">2.4.1.</span> <span class="toc-text">1. 删除单条 ACL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%B8%85%E7%A9%BA%E6%89%80%E6%9C%89-ACL"><span class="toc-number">2.4.2.</span> <span class="toc-text">2. 清空所有 ACL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%81%A2%E5%A4%8D%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90"><span class="toc-number">2.4.3.</span> <span class="toc-text">3.恢复默认权限</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">2.5.</span> <span class="toc-text">五、高级特性与注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%80%92%E5%BD%92%E8%AE%BE%E7%BD%AE%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90"><span class="toc-number">2.5.1.</span> <span class="toc-text">1. 递归设置目录权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">2.5.2.</span> <span class="toc-text">2. 注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">2.6.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="toc-number">3.</span> <span class="toc-text">三、特殊权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E4%BD%8D"><span class="toc-number">3.1.</span> <span class="toc-text">一、特殊权限位</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-SUID%EF%BC%88safe-uid%EF%BC%89"><span class="toc-number">3.1.1.</span> <span class="toc-text">1. SUID（safe uid）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C1%EF%BC%9A%E9%80%9A%E8%BF%87SUID%E4%B8%B4%E6%97%B6%E6%8F%90%E6%9D%83"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">实验1：通过SUID临时提权</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%9D%E8%80%83%EF%BC%9A"><span class="toc-number">3.1.2.</span> <span class="toc-text">思考：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7chattr"><span class="toc-number">3.2.</span> <span class="toc-text">二、文件属性chattr</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E9%80%9A%E8%BF%87chattr%E9%94%81%E5%AE%9A%E6%96%87%E4%BB%B6"><span class="toc-number">3.2.1.</span> <span class="toc-text">实验2：通过chattr锁定文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E5%B1%9E%E6%80%A7%EF%BC%9A"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">扩展属性：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A9%E7%A0%81umask"><span class="toc-number">3.3.</span> <span class="toc-text">三、进程掩码umask</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C3%EF%BC%9A%E4%BF%AE%E6%94%B9umask%E6%8E%A7%E5%88%B6%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90"><span class="toc-number">3.3.1.</span> <span class="toc-text">实验3：修改umask控制默认权限</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.4.</span> <span class="toc-text">四、安全注意事项</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/29/Centos8%20Apache%E7%9A%84%E6%90%AD%E5%BB%BA/" title="Centos8 Apache的搭建">Centos8 Apache的搭建</a><time datetime="2025-07-29T08:17:51.000Z" title="Created 2025-07-29 16:17:51">2025-07-29</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2025/07/29/linux/" title="linux文件管理与查询">linux文件管理与查询</a><time datetime="2025-07-29T08:17:51.000Z" title="Created 2025-07-29 16:17:51">2025-07-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/29/VIM%E7%BC%96%E8%BE%91%E5%99%A8%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/" title="VIM编辑器和用户组管理">VIM编辑器和用户组管理</a><time datetime="2025-07-29T08:17:51.000Z" title="Created 2025-07-29 16:17:51">2025-07-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/29/linux%E5%9F%BA%E7%A1%80%E5%A4%A7%E4%BD%9C%E4%B8%9Aw1/" title="linux基础作业w1">linux基础作业w1</a><time datetime="2025-07-29T08:17:51.000Z" title="Created 2025-07-29 16:17:51">2025-07-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/29/%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9/" title="压缩和解压缩">压缩和解压缩</a><time datetime="2025-07-29T08:17:51.000Z" title="Created 2025-07-29 16:17:51">2025-07-29</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="John Doe" target="_blank">John Doe</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">10</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/linux/" style="font-size: 0.88rem;">linux<sup>9</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 John Doe 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>